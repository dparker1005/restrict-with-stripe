(()=>{"use strict";var e,t={725:(e,t,r)=>{const i=window.wp.element,s=window.wp.apiFetch;var l=r.n(s);const n=window.wp.components,a=window.wp.data,o=window.wp.i18n,c=window.wp.notices,p=()=>{const e=(0,a.useSelect)((e=>e(c.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:t}=(0,a.useDispatch)(c.store);return(0,i.createElement)(n.SnackbarList,{className:"edit-site-notices",notices:e,onRemove:t})};class h extends i.Component{constructor(){super(...arguments),this.state={rwstripe_collect_password:!1,isAPILoaded:!1,productList:[],areProductsLoaded:!1}}componentDidMount(){l()({path:"/wp/v2/settings"}).then((e=>{console.log(e),e.hasOwnProperty("rwstripe_collect_password")&&this.setState({rwstripe_collect_password:e.rwstripe_collect_password,isAPILoaded:!0})})),wp.apiFetch({path:"rwstripe/v1/products"}).then((e=>{this.setState({productList:e,areProductsLoaded:!0})})).catch((e=>{this.setState({areProductsLoaded:e.message})}))}render(){const{rwstripe_collect_password:e,isAPILoaded:t,productList:r,areProductsLoaded:s}=this.state;return t&&s?(c=rwstripe.stripe_user_id?!0===s?(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 1: Connect to Stripe (Connected)","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("a",{href:"https://dashboard.stripe.com/",target:"_blank"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("Go To Stripe Dashboard","restrict-with-stripe"))),(0,i.createElement)("br",null),(0,i.createElement)("br",null),(0,i.createElement)("a",{href:rwstripe.stripe_connect_url,class:"rwstripe-stripe-connect"},(0,i.createElement)("span",null,(0,o.__)("Disconnect From Stripe","restrict-with-stripe")))):(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 1: Connect to Stripe (Error)","restrict-with-stripe")},(0,i.createElement)("p",null,(0,o.__)("The following error is received when trying to communicate with Stripe:","restrict-with-stripe")),(0,i.createElement)("p",null,s),(0,i.createElement)("a",{href:rwstripe.stripe_connect_url,class:"rwstripe-stripe-connect"},(0,i.createElement)("span",null,(0,o.__)("Disconnect From Stripe","restrict-with-stripe")))):(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 1: Connect to Stripe","restrict-with-stripe")},(0,i.createElement)("a",{href:rwstripe.stripe_connect_url,class:"rwstripe-stripe-connect"},(0,i.createElement)("span",null,(0,o.__)("Connect To Stripe","restrict-with-stripe")))),(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"rwstripe-settings__header"},(0,i.createElement)("div",{className:"rwstripe-settings__container"},(0,i.createElement)("div",{className:"rwstripe-settings__title"},(0,i.createElement)("h1",null,(0,o.__)("Restrict With Stripe Set Up","restrict-with-stripe")," ",(0,i.createElement)(n.Icon,{icon:"lock"}))))),(0,i.createElement)("div",{className:"rwstripe-settings__main"},c,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 2: Create Products in Stripe","restrict-with-stripe"),initialOpen:rwstripe.stripe_user_id&&!r.length},(0,i.createElement)("p",null,(0,o.__)("Restrict With Stripe uses Stripe Products to track which site content a user has access to.","restrict-with-stripe")),(0,i.createElement)("p",null,(0,o.__)("A Product should be created in Stripe for each set of content that you would like users to be able to purchase, whether it be a single post or a group of posts.","restrict-with-stripe")),r.length>0?(0,i.createElement)("fragment",null,(0,i.createElement)("a",{href:"https://dashboard.stripe.com/products",target:"_blank"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("Manage %d Products","restrict-with-stripe").replace("%d",r.length)))):(0,i.createElement)("fragment",null,(0,i.createElement)("a",{href:"https://dashboard.stripe.com/products/create",target:"_blank"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("Create a New Product","restrict-with-stripe"))))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 3: Add Restrictions to Site Content","restrict-with-stripe"),initialOpen:rwstripe.stripe_user_id},(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Restricting Post and Pages","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the page or post that you would like to restrict","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Open the settings toolbar","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Open the "Restrict With Stripe" panel',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Select the Stripe Product to restrict the page or post by","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Save the page or post","restrict-with-stripe"))),(0,i.createElement)("a",{href:rwstripe.admin_url+"edit.php?post_type=post"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("View Posts","restrict-with-stripe"))),"  ",(0,i.createElement)("a",{href:rwstripe.admin_url+"edit.php?post_type=page"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("View Pages","restrict-with-stripe")))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Restricting Individual Blocks","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the page or post where you would like to restrict blocks","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Insert the "Restricted Content" block to the page or post',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Add content that should be restricted into that "Restrict Content" block',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Select the Stripe Product to restrict those blocks by","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Save the page or post","restrict-with-stripe")))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Restricting Categories and Tags","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the category or tag that you would like to restrict","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Select the Stripe Product to restrict the page or post by","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Save the category or tag","restrict-with-stripe"))),(0,i.createElement)("a",{href:rwstripe.admin_url+"edit-tags.php?taxonomy=category"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("View Categories","restrict-with-stripe"))),"  ",(0,i.createElement)("a",{href:rwstripe.admin_url+"edit-tags.php?taxonomy=post_tag"},(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0},(0,o.__)("View Tags","restrict-with-stripe")))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Restricting Elementor Widgets","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Select the widget that you would like to restrict","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Open the "Advanced" editor tab',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Open the "Restrict With Stripe" panel',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Select the Stripe Product to restrict the widget by","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Click the "Update" button',"restrict-with-stripe"))))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 4: Link to Stripe Customer Portal","restrict-with-stripe"),initialOpen:rwstripe.stripe_user_id},(0,i.createElement)("p",null,(0,o.__)("The Stripe Customer Portal is a tool created by Stripe to allow customers to view their previous payments and manage their active subscriptions. It is important to link to the Customer Portal to give your users access to this information.","restrict-with-stripe")),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Using the Stripe Customer Portal Block","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the page or post that you would like to add the Customer Portal Block to","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Insert the "Stripe Customer Portal" block to the page or post',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Save the page or post","restrict-with-stripe"))),(0,i.createElement)("p",null,(0,o.__)('For more customzation options, follow the "Creating a Customized Customer Portal Block" instructions below.',"restrict-with-stripe"))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Creating a Customized Customer Portal Block","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the page or post that you would like to add the Customer Portal Block to","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Insert a "Button" block to the page or post',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Customize the style of the button as desired","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Open the sidebar settings for the block using the "Show more settings" option',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Under the "Advanced" tab, add "rwstripe-customer-portal-button" into the "Additional CSS Class(es)" text box',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)("Save the page or post","restrict-with-stripe")))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Creating a Customer Portal Menu Item","restrict-with-stripe"),initialOpen:!1},(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,o.__)("Edit the menu where you would like to add a Customer Portal menu item","restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('In the "Screen Options" dropdown at the top of the screen, ensure that "CSS Classes" is enabled',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Add a new "Custom Links" menu item with "#" as the URL and the desired link text',"restrict-with-stripe")),(0,i.createElement)("li",null,(0,o.__)('Edit that new menu item and add "rwstripe-customer-portal-button" into the "CSS Classes" text box',"restrict-with-stripe"))))),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Step 5: Customize Advanced Settings","restrict-with-stripe"),initialOpen:rwstripe.stripe_user_id},(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Collect Password During Registration","restrict-with-stripe"),onChange:e=>this.setState({rwstripe_collect_password:e}),checked:e}),(0,i.createElement)(n.Button,{isPrimary:!0,isLarge:!0,onClick:()=>{const{rwstripe_collect_password:e}=this.state;l()({path:"/wp/v2/settings",method:"POST",data:{rwstripe_collect_password:e}}).then((e=>{(0,a.dispatch)("core/notices").createNotice("success",(0,o.__)("Settings Saved","restrict-with-stripe"),{type:"snackbar",isDismissible:!0})}),(e=>{(0,a.dispatch)("core/notices").createNotice("error",(0,o.__)("Save Failed","restrict-with-stripe"),{type:"snackbar",isDismissible:!0})}))}},(0,o.__)("Save","restrict-with-stripe")))),(0,i.createElement)("div",{className:"rwstripe-settings__notices"},(0,i.createElement)(p,null)))):(0,i.createElement)(n.Placeholder,null,(0,i.createElement)(n.Spinner,null));var c}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("rwstripe-settings");e&&(0,i.render)((0,i.createElement)(h,null),e)}))}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,i),l.exports}i.m=t,e=[],i.O=(t,r,s,l)=>{if(!r){var n=1/0;for(p=0;p<e.length;p++){for(var[r,s,l]=e[p],a=!0,o=0;o<r.length;o++)(!1&l||n>=l)&&Object.keys(i.O).every((e=>i.O[e](r[o])))?r.splice(o--,1):(a=!1,l<n&&(n=l));if(a){e.splice(p--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[r,s,l]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={412:0,785:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var s,l,[n,a,o]=r,c=0;if(n.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(o)var p=o(i)}for(t&&t(r);c<n.length;c++)l=n[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(p)},r=globalThis.webpackChunkrestrict_with_stripe=globalThis.webpackChunkrestrict_with_stripe||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var s=i.O(void 0,[785],(()=>i(725)));s=i.O(s)})();