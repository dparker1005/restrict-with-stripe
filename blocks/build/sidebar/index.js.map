{"version":3,"file":"sidebar/index.js","mappings":"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","sources":["webpack://restrict-with-stripe/external window [\"wp\",\"element\"]","webpack://restrict-with-stripe/webpack/bootstrap","webpack://restrict-with-stripe/webpack/runtime/compat get default export","webpack://restrict-with-stripe/webpack/runtime/define property getters","webpack://restrict-with-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://restrict-with-stripe/webpack/runtime/make namespace object","webpack://restrict-with-stripe/./blocks/src/sidebar/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","( function ( wp ) {\n\tconst { __ } = wp.i18n;\n\tconst { registerPlugin } = wp.plugins;\n\tconst { PluginDocumentSettingPanel } = wp.editPost;\n\tconst { Component } = wp.element;\n\tconst { SelectControl, Spinner } = wp.components;\n\n\tconst { withSelect, withDispatch } = wp.data;\n\tconst { compose } = wp.compose;\n\n\tconst RestrictionSelectControl = compose(\n\t\twithDispatch( function ( dispatch, props ) {\n\t\t\treturn {\n\t\t\t\tsetMetaValue: function ( value ) {\n\t\t\t\t\tdispatch( 'core/editor' ).editPost( {\n\t\t\t\t\t\tmeta: { [ props.metaKey ]: value },\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t};\n\t\t} ),\n\t\twithSelect( function ( select, props ) {\n\t\t\treturn {\n\t\t\t\tmetaValue:\n\t\t\t\t\tselect( 'core/editor' ).getEditedPostAttribute( 'meta' )[\n\t\t\t\t\t\tprops.metaKey\n\t\t\t\t\t],\n\t\t\t};\n\t\t} )\n\t)( function ( props ) {\n\t\treturn (\n\t\t\t<SelectControl\n\t\t\t\ttype=\"text\"\n\t\t\t\tlabel={ props.label }\n\t\t\t\tvalue={ props.metaValue }\n\t\t\t\tonChange={ ( content ) => {\n\t\t\t\t\tprops.setMetaValue( content );\n\t\t\t\t} }\n\t\t\t\toptions={ [\n\t\t\t\t\t{ label: '-- ' + __( 'Not Restricted', 'restrict-with-stripe' ) + ' --', value: '' },\n\t\t\t\t].concat(\n\t\t\t\t\tprops.products.map( ( product ) => {\n\t\t\t\t\t\treturn { label: product.name, value: product.id };\n\t\t\t\t\t} )\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t} );\n\n\tclass RWStripeSidebar extends Component {\n\t\tconstructor( props ) {\n\t\t\tsuper( props );\n\t\t\tthis.state = {\n\t\t\t\tproductList: [],\n\t\t\t\tloadingProducts: true,\n\t\t\t};\n\t\t}\n\n\t\tcomponentDidMount() {\n\t\t\tthis.fetchProducts();\n\t\t}\n\n\t\tfetchProducts() {\n\t\t\twp.apiFetch( {\n\t\t\t\tpath: 'rwstripe/v1/products',\n\t\t\t} ).then( ( data ) => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tproductList: data,\n\t\t\t\t\tloadingProducts: false,\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<PluginDocumentSettingPanel\n\t\t\t\t\tname=\"rwstripe-sidebar-panel\"\n\t\t\t\t\ttitle={ __( 'Restrict With Stripe', 'restrict-with-stripe' ) }\n\t\t\t\t>\n\t\t\t\t\t{ this.state.loadingProducts ? (\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<RestrictionSelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Stripe Product', 'restrict-with-stripe' ) }\n\t\t\t\t\t\t\tmetaKey=\"rwstripe_stripe_product_ids\"\n\t\t\t\t\t\t\tproducts={ this.state.productList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PluginDocumentSettingPanel>\n\t\t\t);\n\t\t}\n\t}\n\n\tregisterPlugin( 'rwstripe-sidebar', {\n\t\ticon: 'lock',\n\t\trender: RWStripeSidebar,\n\t} );\n} )( window.wp );\n"],"names":["wp","__","i18n","registerPlugin","plugins","PluginDocumentSettingPanel","editPost","Component","element","SelectControl","Spinner","components","withSelect","withDispatch","data","compose","RestrictionSelectControl","dispatch","props","setMetaValue","value","meta","metaKey","select","metaValue","getEditedPostAttribute","label","content","concat","products","map","product","name","id","RWStripeSidebar","constructor","state","productList","loadingProducts","componentDidMount","fetchProducts","apiFetch","path","then","setState","render","icon","window"],"sourceRoot":""}