{"version":3,"file":"sidebar/index.js","mappings":"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","sources":["webpack://restrict-with-stripe/external window [\"wp\",\"element\"]","webpack://restrict-with-stripe/webpack/bootstrap","webpack://restrict-with-stripe/webpack/runtime/compat get default export","webpack://restrict-with-stripe/webpack/runtime/define property getters","webpack://restrict-with-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://restrict-with-stripe/webpack/runtime/make namespace object","webpack://restrict-with-stripe/./blocks/src/sidebar/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","( function( wp ) {\n\n\tconst { registerPlugin } = wp.plugins;\n\tconst { PluginDocumentSettingPanel } = wp.editPost;\n\tconst { Component } = wp.element;\n\tconst { \n\t\tSelectControl,\n\t\tSpinner,\n\t} = wp.components;\n\n\tconst { withSelect, withDispatch } = wp.data;\n\tconst { compose } = wp.compose;\n\n\tconst RestrictionSelectControl = compose(\n\t\twithDispatch( function( dispatch, props ) {\n\t\t\treturn {\n\t\t\t\tsetMetaValue: function( value ) {\n\t\t\t\t\tdispatch( 'core/editor' ).editPost( { meta: { [props.metaKey]: value  } } );\n\t\t\t\t}\n\t\t\t}\n\t\t} ),\n\t\twithSelect( function( select, props ) {\n\t\t\treturn {\n\t\t\t\tmetaValue: select( 'core/editor' ).getEditedPostAttribute( 'meta' )[ props.metaKey ],\n\t\t\t}\n\t\t} )\n\t)( function( props ) {\n\t\treturn (\n\t\t\t<SelectControl\n\t\t\t\ttype=\"text\"\n\t\t\t\tlabel={ props.label }\n\t\t\t\tvalue={ props.metaValue }\n\t\t\t\tonChange={ ( content ) => { props.setMetaValue( content ) } }\n\t\t\t\toptions={ [ { label: '-- Not Restricted --', value: '' } ].concat( props.products.map( ( product ) => { return { label: product.name, value: product.id } } ) ) }\n\t\t\t/>\n\t\t);\n\t});\n\n\tclass RWStripeSidebar extends Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\tproductList: [],\n\t\t\t\tloadingProducts: true,\n\t\t\t}\n\t\t}\n\t \n\t\tcomponentDidMount() {\n\t\t\tthis.fetchProducts();\n\t\t}\n\t \n\t\tfetchProducts() {\n\t\t\twp.apiFetch({\n\t\t\t\tpath: 'rwstripe/v1/products',\n\t\t\t}).then(data => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tproductList: data,\n\t\t\t\t\tloadingProducts: false\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<PluginDocumentSettingPanel\n\t\t\t\t\tname=\"rwstripe-sidebar-panel\"\n\t\t\t\t\ttitle=\"Restrict With Stripe\"\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.loadingProducts ?\n\t\t\t\t\t\t\t<Spinner /> :\n\t\t\t\t\t\t\t<RestrictionSelectControl\n\t\t\t\t\t\t\t\tlabel=\"Stripe Product\"\n\t\t\t\t\t\t\t\tmetaKey=\"rwstripe_stripe_product_ids\"\n\t\t\t\t\t\t\t\tproducts={ this.state.productList }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</PluginDocumentSettingPanel>\n\t\t\t)\n\t\t}\n\t}\n\t\n\tregisterPlugin( 'mrwstripe-sidebar', {\n\t\ticon: 'lock',\n\t\trender: RWStripeSidebar\n\t} );\n\n} )( window.wp );"],"names":["wp","registerPlugin","plugins","PluginDocumentSettingPanel","editPost","Component","element","SelectControl","Spinner","components","withSelect","withDispatch","data","compose","RestrictionSelectControl","dispatch","props","setMetaValue","value","meta","metaKey","select","metaValue","getEditedPostAttribute","label","content","concat","products","map","product","name","id","RWStripeSidebar","constructor","state","productList","loadingProducts","componentDidMount","fetchProducts","apiFetch","path","then","setState","render","icon","window"],"sourceRoot":""}