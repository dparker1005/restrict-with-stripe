{"version":3,"file":"sidebar/index.js","mappings":"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","sources":["webpack://restrict-with-stripe/external window [\"wp\",\"element\"]","webpack://restrict-with-stripe/webpack/bootstrap","webpack://restrict-with-stripe/webpack/runtime/compat get default export","webpack://restrict-with-stripe/webpack/runtime/define property getters","webpack://restrict-with-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://restrict-with-stripe/webpack/runtime/make namespace object","webpack://restrict-with-stripe/./blocks/src/sidebar/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","( function ( wp ) {\n\tconst { __ } = wp.i18n;\n\tconst { registerPlugin } = wp.plugins;\n\tconst { PluginDocumentSettingPanel } = wp.editPost;\n\tconst { Component } = wp.element;\n\tconst { Spinner, CheckboxControl } = wp.components;\n\n\tconst { withSelect, withDispatch } = wp.data;\n\tconst { compose } = wp.compose;\n\n\tconst RestrictionSelectControl = compose(\n\t\twithDispatch( function ( dispatch, props ) {\n\t\t\treturn {\n\t\t\t\tsetMetaValue: function ( value ) {\n\t\t\t\t\tdispatch( 'core/editor' ).editPost( {\n\t\t\t\t\t\tmeta: { [ props.metaKey ]: value },\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t};\n\t\t} ),\n\t\twithSelect( function ( select, props ) {\n\t\t\treturn {\n\t\t\t\tmetaValue:\n\t\t\t\t\tselect( 'core/editor' ).getEditedPostAttribute( 'meta' )[\n\t\t\t\t\t\tprops.metaKey\n\t\t\t\t\t],\n\t\t\t};\n\t\t} )\n\t)( function ( props ) {\n\t\tconst product_checkboxes = props.products.map(\n\t\t\t( product ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\tkey={ product.id }\n\t\t\t\t\t\tlabel={ product.name }\n\t\t\t\t\t\tchecked={ props.metaValue.includes( product.id ) }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tlet newValue = [...props.metaValue];\n\t\t\t\t\t\t\tif ( newValue.includes( product.id ) ) {\n\t\t\t\t\t\t\t\tnewValue = newValue.filter(\n\t\t\t\t\t\t\t\t\t( item ) => item !== product.id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewValue.push( product.id )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprops.setMetaValue( newValue );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t);\n\t\treturn (\n\t\t\t<fragment>\n\t\t\t\t{product_checkboxes}\n\t\t\t</fragment>\n\t\t);\n\t} );\n\n\tclass RWStripeSidebar extends Component {\n\t\tconstructor( props ) {\n\t\t\tsuper( props );\n\t\t\tthis.state = {\n\t\t\t\tproductList: [],\n\t\t\t\tloadingProducts: true,\n\t\t\t};\n\t\t}\n\n\t\tcomponentDidMount() {\n\t\t\tthis.fetchProducts();\n\t\t}\n\n\t\tfetchProducts() {\n\t\t\twp.apiFetch( {\n\t\t\t\tpath: 'rwstripe/v1/products',\n\t\t\t} ).then( ( data ) => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tproductList: data,\n\t\t\t\t\tloadingProducts: false,\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<PluginDocumentSettingPanel\n\t\t\t\t\tname=\"rwstripe-sidebar-panel\"\n\t\t\t\t\ttitle={ __( 'Restrict With Stripe', 'restrict-with-stripe' ) }\n\t\t\t\t>\n\t\t\t\t\t{ this.state.loadingProducts ? (\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<RestrictionSelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Stripe Product', 'restrict-with-stripe' ) }\n\t\t\t\t\t\t\tmetaKey=\"rwstripe_stripe_product_ids\"\n\t\t\t\t\t\t\tproducts={ this.state.productList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PluginDocumentSettingPanel>\n\t\t\t);\n\t\t}\n\t}\n\n\tregisterPlugin( 'rwstripe-sidebar', {\n\t\ticon: 'lock',\n\t\trender: RWStripeSidebar,\n\t} );\n} )( window.wp );\n"],"names":["wp","__","i18n","registerPlugin","plugins","PluginDocumentSettingPanel","editPost","Component","element","Spinner","CheckboxControl","components","withSelect","withDispatch","data","compose","RestrictionSelectControl","dispatch","props","setMetaValue","value","meta","metaKey","select","metaValue","getEditedPostAttribute","product_checkboxes","products","map","product","id","name","includes","newValue","filter","item","push","RWStripeSidebar","constructor","state","productList","loadingProducts","componentDidMount","fetchProducts","apiFetch","path","then","setState","render","icon","window"],"sourceRoot":""}